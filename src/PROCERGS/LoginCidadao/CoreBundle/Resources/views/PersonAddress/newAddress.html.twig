{% extends "PROCERGSLoginCidadaoCoreBundle:PersonAddress:base.html.twig" %}

{% block addresses %}
    {% include "PROCERGSLoginCidadaoCoreBundle:PersonAddress:list.component.html.twig" %}
    {% include "PROCERGSLoginCidadaoCoreBundle:PersonAddress:form.component.html.twig" %}
{% endblock %}

{% block javascripts %}
{{ parent() }}
{% javascripts '@PROCERGSLoginCidadaoCoreBundle/Resources/public/js/components/typeahead.bundle.js' %}
    <script src="{{ asset_url }}"></script>
{% endjavascripts %}
    <script>
        var cities = new Bloodhound({
            datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            remote: '/api/v1/address/cities/search/%QUERY.json',
        });
        cities.initialize();
        $('#{{ form.city.vars.id }}').typeahead(null, {
            name: 'city',
            displayKey: 'name',
            source: cities.ttAdapter()
        });
    </script>
{% endblock %}